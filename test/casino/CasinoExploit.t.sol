// SPDX-License-Identifier: MIT
pragma solidity ^0.8.18;

import "forge-std/Test.sol";
import "../../challenges/05-Casino/src/Casino.sol";

contract CasinoCheatcodeExploitTest is Test {
    function test_CheatcodeSetsConsecutiveWins() public {
        Casino casino = new Casino();

        bytes32 slot = bytes32(uint256(1));
        bytes32 consecutiveWinsSlot = keccak256(
            bytes.concat(bytes32(uint256(uint160(address(this)))), slot)
        );

        vm.store(address(casino), consecutiveWinsSlot, bytes32(uint256(2)));

        uint16[] memory result = casino.done();
        assertEq(result.length, 0);
    }
}
